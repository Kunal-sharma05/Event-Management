{"ast":null,"code":"var _jsxFileName = \"C:\\\\student\\\\Hexaware\\\\React workspace\\\\event\\\\src\\\\components\\\\LoginComponent.jsx\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { useRef, useState, useEffect, useContext } from 'react';\nimport { AuthContext } from '../context/AuthProvider';\nimport EmployeeService from '../services/EmployeeService';\nimport { Link, useNavigate, useLocation } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const LoginComponent = () => {\n  _s();\n  var _location$state, _location$state$from;\n  const userRef = useRef();\n  const errorRef = useRef();\n  const navigate = useNavigate();\n  const [user, setUser] = useState('');\n  const [pwd, setPwd] = useState('');\n  const location = useLocation();\n  const from = (location === null || location === void 0 ? void 0 : (_location$state = location.state) === null || _location$state === void 0 ? void 0 : (_location$state$from = _location$state.from) === null || _location$state$from === void 0 ? void 0 : _location$state$from.pathname) || \"/\";\n  const [errMsg, setErrMsg] = useState('');\n  const [success, setSuccess] = useState(false);\n  const {\n    setAuth\n  } = useContext(AuthContext);\n  useEffect(() => {\n    var _useRef$current;\n    useRef === null || useRef === void 0 ? void 0 : (_useRef$current = useRef.current) === null || _useRef$current === void 0 ? void 0 : _useRef$current.focus();\n  }, []);\n  const handleLoginSubmit = e => {\n    e.preventDefault();\n    console.log(\"username and password received from login form :\" + user + \" \" + pwd);\n    const userlogindata = {\n      name: user,\n      password: pwd\n    };\n    EmployeeService.userlogin(userlogindata).then(response => {\n      console.log('response from login API : ' + JSON.stringify(response.data));\n      const accessToken = response.data.accessToken;\n      setAuth({\n        user,\n        pwd,\n        accessToken\n      });\n      setUser('');\n      setPwd('');\n      setSuccess(true);\n      navigate('/employees');\n    }).catch(error => {\n      var _error$response;\n      console.log(error);\n      if (!(error !== null && error !== void 0 && error.response)) {\n        setErrMsg(\"No server response\");\n      } else if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 400) {\n        setErrMsg(\"username taken\");\n      } else {\n        setErrMsg(\"Registration failed...\");\n      }\n    });\n    setUser('');\n    setPwd(' ');\n    setSuccess(true);\n  };\n  return success ? /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"section\", {\n      children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: navigate('/employees')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this)\n  }, void 0, false) : /*#__PURE__*/_jsxDEV(\"section\", {\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      ref: errorRef,\n      className: errMsg ? \"errmsg\" : \"offscreen\",\n      \"aria-live\": \"assertive\",\n      children: errMsg\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Sign In\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"username\",\n        children: \"Username:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 14\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"username\",\n        onChange: e => {\n          setUser(e.target.value);\n        },\n        required: true,\n        value: user\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"password\",\n        children: \"Password:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        id: \"password\",\n        onChange: e => {\n          setPwd(e.target.value);\n        },\n        required: true,\n        value: pwd\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: e => handleLoginSubmit(e),\n        children: \"Sign In\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Need an account?\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 32\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"line\",\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/register\",\n            children: \"click here to register\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n};\n_s(LoginComponent, \"GVN9pUaBDn7K9p2CZ8GAyxFmuik=\", false, function () {\n  return [useNavigate, useLocation];\n});\n_c = LoginComponent;\nvar _c;\n$RefreshReg$(_c, \"LoginComponent\");","map":{"version":3,"names":["React","useRef","useState","useEffect","useContext","AuthContext","EmployeeService","Link","useNavigate","useLocation","jsxDEV","_jsxDEV","Fragment","_Fragment","LoginComponent","_s","_location$state","_location$state$from","userRef","errorRef","navigate","user","setUser","pwd","setPwd","location","from","state","pathname","errMsg","setErrMsg","success","setSuccess","setAuth","_useRef$current","current","focus","handleLoginSubmit","e","preventDefault","console","log","userlogindata","name","password","userlogin","then","response","JSON","stringify","data","accessToken","catch","error","_error$response","status","children","fileName","_jsxFileName","lineNumber","columnNumber","ref","className","htmlFor","type","id","onChange","target","value","required","onClick","to","_c","$RefreshReg$"],"sources":["C:/student/Hexaware/React workspace/event/src/components/LoginComponent.jsx"],"sourcesContent":["import React from 'react'\r\nimport {useRef,useState,useEffect,useContext} from 'react'\r\nimport {AuthContext} from '../context/AuthProvider';\r\nimport EmployeeService from '../services/EmployeeService';\r\nimport {Link,useNavigate,useLocation} from 'react-router-dom'\r\nexport const LoginComponent = () => {\r\n    const userRef=useRef();\r\n    const errorRef=useRef();\r\n    const navigate=useNavigate()\r\n    const [user,setUser]=useState('')\r\n    const [pwd,setPwd]=useState('')  \r\n    const location = useLocation();\r\n    const from = location?.state?.from?.pathname || \"/\";\r\n \r\n \r\n    const [errMsg,setErrMsg]=useState('')\r\n    const [success,setSuccess]=useState(false)\r\n   \r\n    const {setAuth}=useContext(AuthContext)\r\n    useEffect(()=>{\r\n        useRef?.current?.focus();},[])\r\n \r\n    const handleLoginSubmit=(e)=>{\r\n        e.preventDefault();\r\n        console.log(\"username and password received from login form :\"+user+\" \"+pwd)\r\n        const userlogindata={name:user,password:pwd}\r\n        EmployeeService.userlogin(userlogindata).then\r\n        ((response)=>{\r\n            console.log('response from login API : '+JSON.stringify(response.data))\r\n            const accessToken=response.data.accessToken\r\n \r\n            setAuth({user,pwd,accessToken})\r\n            setUser('')\r\n            setPwd('')\r\n            setSuccess(true)\r\n            navigate('/employees')\r\n        } ).catch(error=>{console.log(error)\r\n        if(!error?.response){\r\n            setErrMsg(\"No server response\")\r\n        }\r\n        else if(error.response?.status===400){\r\n            setErrMsg(\"username taken\")\r\n   \r\n        }\r\n        else{\r\n            setErrMsg(\"Registration failed...\")\r\n        }\r\n       \r\n        })  \r\n        setUser('')\r\n        setPwd(' ')\r\n        setSuccess(true)\r\n \r\n    }\r\n \r\n  return ((success)?<>\r\n      <section>\r\n        <br/>\r\n        <p>\r\n            {navigate('/employees')}\r\n        </p>\r\n      </section>\r\n  </>:\r\n    <section>\r\n        <p ref={errorRef} className={errMsg?\"errmsg\":\"offscreen\"}\r\n        aria-live=\"assertive\">{errMsg}</p>\r\n        <h1>Sign In</h1>\r\n \r\n        <form>\r\n             {/* USERNAME */}\r\n             <label htmlFor=\"username\">\r\n                Username:\r\n            </label>\r\n            <input\r\n                type=\"text\"\r\n                id=\"username\"\r\n                onChange={(e)=>{setUser(e.target.value)}}\r\n                required\r\n                value={user}\r\n            />\r\n \r\n            {/* PASSWORD */}\r\n            <label htmlFor=\"password\">\r\n                Password:\r\n            </label>\r\n            <input\r\n                type=\"password\"\r\n                id=\"password\"\r\n                onChange={(e)=>{setPwd(e.target.value)}}\r\n                required\r\n                value={pwd}\r\n            />\r\n            <button onClick={(e)=>handleLoginSubmit(e)}>Sign In</button>\r\n            <p>Need an account?<br/>\r\n            <span className='line'>\r\n                {/* <Link to='/register??' */}\r\n                <Link to=\"/register\">click here to register</Link>\r\n            </span>\r\n       \r\n \r\n            </p>\r\n       \r\n        </form>\r\n    </section>\r\n \r\n  )\r\n}"],"mappings":";;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAAQC,MAAM,EAACC,QAAQ,EAACC,SAAS,EAACC,UAAU,QAAO,OAAO;AAC1D,SAAQC,WAAW,QAAO,yBAAyB;AACnD,OAAOC,eAAe,MAAM,6BAA6B;AACzD,SAAQC,IAAI,EAACC,WAAW,EAACC,WAAW,QAAO,kBAAkB;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAAA,SAAAC,QAAA,IAAAC,SAAA;AAC7D,OAAO,MAAMC,cAAc,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAAA,IAAAC,eAAA,EAAAC,oBAAA;EAChC,MAAMC,OAAO,GAACjB,MAAM,CAAC,CAAC;EACtB,MAAMkB,QAAQ,GAAClB,MAAM,CAAC,CAAC;EACvB,MAAMmB,QAAQ,GAACZ,WAAW,CAAC,CAAC;EAC5B,MAAM,CAACa,IAAI,EAACC,OAAO,CAAC,GAACpB,QAAQ,CAAC,EAAE,CAAC;EACjC,MAAM,CAACqB,GAAG,EAACC,MAAM,CAAC,GAACtB,QAAQ,CAAC,EAAE,CAAC;EAC/B,MAAMuB,QAAQ,GAAGhB,WAAW,CAAC,CAAC;EAC9B,MAAMiB,IAAI,GAAG,CAAAD,QAAQ,aAARA,QAAQ,wBAAAT,eAAA,GAARS,QAAQ,CAAEE,KAAK,cAAAX,eAAA,wBAAAC,oBAAA,GAAfD,eAAA,CAAiBU,IAAI,cAAAT,oBAAA,uBAArBA,oBAAA,CAAuBW,QAAQ,KAAI,GAAG;EAGnD,MAAM,CAACC,MAAM,EAACC,SAAS,CAAC,GAAC5B,QAAQ,CAAC,EAAE,CAAC;EACrC,MAAM,CAAC6B,OAAO,EAACC,UAAU,CAAC,GAAC9B,QAAQ,CAAC,KAAK,CAAC;EAE1C,MAAM;IAAC+B;EAAO,CAAC,GAAC7B,UAAU,CAACC,WAAW,CAAC;EACvCF,SAAS,CAAC,MAAI;IAAA,IAAA+B,eAAA;IACVjC,MAAM,aAANA,MAAM,wBAAAiC,eAAA,GAANjC,MAAM,CAAEkC,OAAO,cAAAD,eAAA,uBAAfA,eAAA,CAAiBE,KAAK,CAAC,CAAC;EAAC,CAAC,EAAC,EAAE,CAAC;EAElC,MAAMC,iBAAiB,GAAEC,CAAC,IAAG;IACzBA,CAAC,CAACC,cAAc,CAAC,CAAC;IAClBC,OAAO,CAACC,GAAG,CAAC,kDAAkD,GAACpB,IAAI,GAAC,GAAG,GAACE,GAAG,CAAC;IAC5E,MAAMmB,aAAa,GAAC;MAACC,IAAI,EAACtB,IAAI;MAACuB,QAAQ,EAACrB;IAAG,CAAC;IAC5CjB,eAAe,CAACuC,SAAS,CAACH,aAAa,CAAC,CAACI,IAAI,CAC3CC,QAAQ,IAAG;MACTP,OAAO,CAACC,GAAG,CAAC,4BAA4B,GAACO,IAAI,CAACC,SAAS,CAACF,QAAQ,CAACG,IAAI,CAAC,CAAC;MACvE,MAAMC,WAAW,GAACJ,QAAQ,CAACG,IAAI,CAACC,WAAW;MAE3ClB,OAAO,CAAC;QAACZ,IAAI;QAACE,GAAG;QAAC4B;MAAW,CAAC,CAAC;MAC/B7B,OAAO,CAAC,EAAE,CAAC;MACXE,MAAM,CAAC,EAAE,CAAC;MACVQ,UAAU,CAAC,IAAI,CAAC;MAChBZ,QAAQ,CAAC,YAAY,CAAC;IAC1B,CAAE,CAAC,CAACgC,KAAK,CAACC,KAAK,IAAE;MAAA,IAAAC,eAAA;MAACd,OAAO,CAACC,GAAG,CAACY,KAAK,CAAC;MACpC,IAAG,EAACA,KAAK,aAALA,KAAK,eAALA,KAAK,CAAEN,QAAQ,GAAC;QAChBjB,SAAS,CAAC,oBAAoB,CAAC;MACnC,CAAC,MACI,IAAG,EAAAwB,eAAA,GAAAD,KAAK,CAACN,QAAQ,cAAAO,eAAA,uBAAdA,eAAA,CAAgBC,MAAM,MAAG,GAAG,EAAC;QACjCzB,SAAS,CAAC,gBAAgB,CAAC;MAE/B,CAAC,MACG;QACAA,SAAS,CAAC,wBAAwB,CAAC;MACvC;IAEA,CAAC,CAAC;IACFR,OAAO,CAAC,EAAE,CAAC;IACXE,MAAM,CAAC,GAAG,CAAC;IACXQ,UAAU,CAAC,IAAI,CAAC;EAEpB,CAAC;EAEH,OAASD,OAAO,gBAAEpB,OAAA,CAAAE,SAAA;IAAA2C,QAAA,eACd7C,OAAA;MAAA6C,QAAA,gBACE7C,OAAA;QAAA8C,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eACLjD,OAAA;QAAA6C,QAAA,EACKpC,QAAQ,CAAC,YAAY;MAAC;QAAAqC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACxB,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACG;EAAC,gBACZ,CAAC,gBACDjD,OAAA;IAAA6C,QAAA,gBACI7C,OAAA;MAAGkD,GAAG,EAAE1C,QAAS;MAAC2C,SAAS,EAAEjC,MAAM,GAAC,QAAQ,GAAC,WAAY;MACzD,aAAU,WAAW;MAAA2B,QAAA,EAAE3B;IAAM;MAAA4B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eAClCjD,OAAA;MAAA6C,QAAA,EAAI;IAAO;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eAEhBjD,OAAA;MAAA6C,QAAA,gBAEK7C,OAAA;QAAOoD,OAAO,EAAC,UAAU;QAAAP,QAAA,EAAC;MAE3B;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC,eACRjD,OAAA;QACIqD,IAAI,EAAC,MAAM;QACXC,EAAE,EAAC,UAAU;QACbC,QAAQ,EAAG5B,CAAC,IAAG;UAAChB,OAAO,CAACgB,CAAC,CAAC6B,MAAM,CAACC,KAAK,CAAC;QAAA,CAAE;QACzCC,QAAQ;QACRD,KAAK,EAAE/C;MAAK;QAAAoC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACf,CAAC,eAGFjD,OAAA;QAAOoD,OAAO,EAAC,UAAU;QAAAP,QAAA,EAAC;MAE1B;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC,eACRjD,OAAA;QACIqD,IAAI,EAAC,UAAU;QACfC,EAAE,EAAC,UAAU;QACbC,QAAQ,EAAG5B,CAAC,IAAG;UAACd,MAAM,CAACc,CAAC,CAAC6B,MAAM,CAACC,KAAK,CAAC;QAAA,CAAE;QACxCC,QAAQ;QACRD,KAAK,EAAE7C;MAAI;QAAAkC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACd,CAAC,eACFjD,OAAA;QAAQ2D,OAAO,EAAGhC,CAAC,IAAGD,iBAAiB,CAACC,CAAC,CAAE;QAAAkB,QAAA,EAAC;MAAO;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eAC5DjD,OAAA;QAAA6C,QAAA,GAAG,kBAAgB,eAAA7C,OAAA;UAAA8C,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eACxBjD,OAAA;UAAMmD,SAAS,EAAC,MAAM;UAAAN,QAAA,eAElB7C,OAAA,CAACJ,IAAI;YAACgE,EAAE,EAAC,WAAW;YAAAf,QAAA,EAAC;UAAsB;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAChD,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAGJ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAEF,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACF,CAAC;AAGd,CAAC;AAAA7C,EAAA,CArGYD,cAAc;EAAA,QAGRN,WAAW,EAGTC,WAAW;AAAA;AAAA+D,EAAA,GANnB1D,cAAc;AAAA,IAAA0D,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}